{"ast":null,"code":"import _slicedToArray from\"C:/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{CurrentUserContextObj}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Card(_ref){var card=_ref.card,onCardClick=_ref.onCardClick,onCardLike=_ref.onCardLike,onCardDeleteClick=_ref.onCardDeleteClick;var currentUser=React.useContext(CurrentUserContextObj);var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),isLiked=_React$useState2[0],setIsLiked=_React$useState2[1];// Определяем, являемся ли мы владельцем текущей карточки\nvar isOwn=card.owner._id===currentUser._id;var isLike=card.likes.map(function(owner){return owner._id;}).includes(currentUser._id);React.useEffect(function(){setIsLiked(isLike);},[isLike]);var cardLikeButtonClassName=\"response-container__like-btn \".concat(isLiked&&\"response-container__like-btn_active\");function handleDeleteClick(){onCardDeleteClick(card);}function handleLikeClick(){onCardLike(card);}function handleClick(){onCardClick(card);}return/*#__PURE__*/_jsxs(\"article\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"img\",{src:card.link,alt:card.name,className:\"card__image\",onClick:handleClick}),/*#__PURE__*/_jsx(\"h2\",{className:\"card__title\",children:card.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"response-container\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:cardLikeButtonClassName,onClick:handleLikeClick}),/*#__PURE__*/_jsx(\"span\",{className:\"response-container__like-counter\",children:card.likes.length})]}),isOwn&&/*#__PURE__*/_jsx(\"button\",{className:\"trash-btn trash-btn_type_visible\",onClick:handleDeleteClick})]});}export default Card;","map":{"version":3,"names":["React","CurrentUserContextObj","jsx","_jsx","jsxs","_jsxs","Card","_ref","card","onCardClick","onCardLike","onCardDeleteClick","currentUser","useContext","_React$useState","useState","_React$useState2","_slicedToArray","isLiked","setIsLiked","isOwn","owner","_id","isLike","likes","map","includes","useEffect","cardLikeButtonClassName","concat","handleDeleteClick","handleLikeClick","handleClick","className","children","src","link","alt","name","onClick","type","length"],"sources":["C:/dev/react-mesto-auth/src/components/Card.js"],"sourcesContent":["import React from \"react\";\r\nimport { CurrentUserContextObj } from \"../contexts/CurrentUserContext\";\r\nfunction Card({ card, onCardClick, onCardLike, onCardDeleteClick }) {\r\n  const currentUser = React.useContext(CurrentUserContextObj);\r\n\r\n  const [isLiked, setIsLiked] = React.useState();\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLike = card.likes.map((owner) => owner._id).includes(currentUser._id);\r\n\r\n  React.useEffect(() => {\r\n    setIsLiked(isLike);\r\n  }, [isLike]);\r\n\r\n  const cardLikeButtonClassName = `response-container__like-btn ${\r\n    isLiked && \"response-container__like-btn_active\"\r\n  }`;\r\n\r\n  function handleDeleteClick() {\r\n    onCardDeleteClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  return (\r\n    <article className=\"card\">\r\n      <img\r\n        src={card.link}\r\n        alt={card.name}\r\n        className=\"card__image\"\r\n        onClick={handleClick}\r\n      />\r\n      <h2 className=\"card__title\">{card.name}</h2>\r\n      <div className=\"response-container\">\r\n        <button\r\n          type=\"button\"\r\n          className={cardLikeButtonClassName}\r\n          onClick={handleLikeClick}\r\n        ></button>\r\n        <span className=\"response-container__like-counter\">\r\n          {card.likes.length}\r\n        </span>\r\n      </div>\r\n      {isOwn && (\r\n        <button\r\n          className=\"trash-btn trash-btn_type_visible\"\r\n          onClick={handleDeleteClick}\r\n        />\r\n      )}\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n"],"mappings":"6GAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,qBAAqB,KAAQ,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACvE,QAAS,CAAAC,IAAIA,CAAAC,IAAA,CAAuD,IAApD,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,WAAW,CAAAF,IAAA,CAAXE,WAAW,CAAEC,UAAU,CAAAH,IAAA,CAAVG,UAAU,CAAEC,iBAAiB,CAAAJ,IAAA,CAAjBI,iBAAiB,CAC9D,GAAM,CAAAC,WAAW,CAAGZ,KAAK,CAACa,UAAU,CAACZ,qBAAqB,CAAC,CAE3D,IAAAa,eAAA,CAA8Bd,KAAK,CAACe,QAAQ,EAAE,CAAAC,gBAAA,CAAAC,cAAA,CAAAH,eAAA,IAAvCI,OAAO,CAAAF,gBAAA,IAAEG,UAAU,CAAAH,gBAAA,IAC1B;AACA,GAAM,CAAAI,KAAK,CAAGZ,IAAI,CAACa,KAAK,CAACC,GAAG,GAAKV,WAAW,CAACU,GAAG,CAChD,GAAM,CAAAC,MAAM,CAAGf,IAAI,CAACgB,KAAK,CAACC,GAAG,CAAC,SAACJ,KAAK,QAAK,CAAAA,KAAK,CAACC,GAAG,GAAC,CAACI,QAAQ,CAACd,WAAW,CAACU,GAAG,CAAC,CAE7EtB,KAAK,CAAC2B,SAAS,CAAC,UAAM,CACpBR,UAAU,CAACI,MAAM,CAAC,CACpB,CAAC,CAAE,CAACA,MAAM,CAAC,CAAC,CAEZ,GAAM,CAAAK,uBAAuB,iCAAAC,MAAA,CAC3BX,OAAO,EAAI,qCAAqC,CAChD,CAEF,QAAS,CAAAY,iBAAiBA,CAAA,CAAG,CAC3BnB,iBAAiB,CAACH,IAAI,CAAC,CACzB,CAEA,QAAS,CAAAuB,eAAeA,CAAA,CAAG,CACzBrB,UAAU,CAACF,IAAI,CAAC,CAClB,CAEA,QAAS,CAAAwB,WAAWA,CAAA,CAAG,CACrBvB,WAAW,CAACD,IAAI,CAAC,CACnB,CAEA,mBACEH,KAAA,YAAS4B,SAAS,CAAC,MAAM,CAAAC,QAAA,eACvB/B,IAAA,QACEgC,GAAG,CAAE3B,IAAI,CAAC4B,IAAK,CACfC,GAAG,CAAE7B,IAAI,CAAC8B,IAAK,CACfL,SAAS,CAAC,aAAa,CACvBM,OAAO,CAAEP,WAAY,EACrB,cACF7B,IAAA,OAAI8B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE1B,IAAI,CAAC8B,IAAI,EAAM,cAC5CjC,KAAA,QAAK4B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjC/B,IAAA,WACEqC,IAAI,CAAC,QAAQ,CACbP,SAAS,CAAEL,uBAAwB,CACnCW,OAAO,CAAER,eAAgB,EACjB,cACV5B,IAAA,SAAM8B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAC/C1B,IAAI,CAACgB,KAAK,CAACiB,MAAM,EACb,GACH,CACLrB,KAAK,eACJjB,IAAA,WACE8B,SAAS,CAAC,kCAAkC,CAC5CM,OAAO,CAAET,iBAAkB,EAE9B,GACO,CAEd,CAEA,cAAe,CAAAxB,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}